<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <title>WA Multi ‚Äî Electron (Melhorado)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="Content-Security-Policy" content="default-src 'self' https://web.whatsapp.com; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline';">
  <style>
    /* ========== VARI√ÅVEIS DE TEMA ========== */
    :root {
      --bg-primary: #0c0c0c;
      --bg-secondary: #111;
      --bg-tertiary: #1a1a1a;
      --bg-tile: #151515;
      --border-color: #2a2a2a;
      --border-input: #333;
      --text-primary: #f3f3f3;
      --text-secondary: #999;
      --accent: #5ea3ff;
      --accent-hover: #7ab5ff;
      --success: #4caf50;
      --warning: #ff9800;
      --danger: #f44336;
      --hover-bg: #262626;
    }

    [data-theme="light"] {
      --bg-primary: #f5f5f5;
      --bg-secondary: #fff;
      --bg-tertiary: #e0e0e0;
      --bg-tile: #fff;
      --border-color: #ddd;
      --border-input: #ccc;
      --text-primary: #222;
      --text-secondary: #666;
      --accent: #1976d2;
      --accent-hover: #2196f3;
      --success: #4caf50;
      --warning: #ff9800;
      --danger: #f44336;
      --hover-bg: #f0f0f0;
    }

    /* ========== ESTILOS GLOBAIS ========== */
    * { box-sizing: border-box; }
    
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      transition: background 0.3s, color 0.3s;
    }

    /* ========== HEADER/TOOLBAR ========== */
    header {
      background: var(--bg-secondary);
      padding: 10px;
      display: flex;
      gap: 8px;
      align-items: center;
      flex-wrap: wrap;
      position: sticky;
      top: 0;
      z-index: 5;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    }

    .toolbar-group {
      display: flex;
      gap: 6px;
      align-items: center;
      padding: 4px 8px;
      border-right: 1px solid var(--border-color);
    }

    .toolbar-group:last-child {
      border-right: none;
    }

    /* ========== BUTTONS ========== */
    button, input[type="button"] {
      padding: 8px 14px;
      border-radius: 6px;
      border: 1px solid var(--border-input);
      background: var(--bg-tertiary);
      color: var(--text-primary);
      cursor: pointer;
      font-size: 14px;
      transition: all 0.2s;
      font-family: inherit;
    }

    button:hover {
      background: var(--hover-bg);
      transform: translateY(-1px);
    }

    button:active {
      transform: translateY(0);
    }

    button.primary {
      background: var(--accent);
      color: white;
      border-color: var(--accent);
    }

    button.primary:hover {
      background: var(--accent-hover);
    }

    button.danger {
      background: var(--danger);
      color: white;
      border-color: var(--danger);
    }

    button.danger:hover {
      opacity: 0.9;
    }

    button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    /* ========== INPUTS ========== */
    input[type="text"],
    input[type="number"],
    select {
      padding: 8px 10px;
      border-radius: 6px;
      border: 1px solid var(--border-input);
      background: var(--bg-tertiary);
      color: var(--text-primary);
      font-size: 14px;
      font-family: inherit;
    }

    input:focus, select:focus {
      outline: 2px solid var(--accent);
      outline-offset: 2px;
    }

    /* ========== GRID DE TILES ========== */
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(420px, 1fr));
      gap: 12px;
      padding: 12px;
    }

    @media (max-width: 500px) {
      .grid {
        grid-template-columns: 1fr;
      }
    }

    /* ========== TILE ========== */
    .tile {
      background: var(--bg-tile);
      border: 2px solid var(--border-color);
      border-radius: 12px;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      transition: all 0.3s;
      position: relative;
    }

    .tile:hover {
      border-color: var(--accent);
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }

    .tile.selected {
      outline: 3px solid var(--accent);
      outline-offset: 2px;
    }

    .tile.big {
      grid-column: 1 / -1;
      height: calc(100vh - 150px);
    }

    .tile.big webview {
      height: calc(100% - 50px);
    }

    .tile header {
      background: var(--bg-tertiary);
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      cursor: move;
      user-select: none;
    }

    .tile-title {
      font-weight: 600;
      font-size: 15px;
      cursor: pointer;
      padding: 4px 8px;
      border-radius: 4px;
      transition: background 0.2s;
    }

    .tile-title:hover {
      background: var(--hover-bg);
    }

    .tile-title-input {
      padding: 4px 8px;
      font-size: 15px;
      font-weight: 600;
      width: 150px;
    }

    /* ========== LOADING ========== */
    .loading-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s;
    }

    .loading-overlay.show {
      opacity: 1;
      pointer-events: all;
    }

    .spinner {
      border: 4px solid rgba(255,255,255,0.3);
      border-top-color: var(--accent);
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* ========== WEBVIEW ========== */
    webview {
      width: 100%;
      height: 560px;
      background: #000;
      border: none;
    }

    /* ========== ZOOM CONTROLS ========== */
    .zoomWrap {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .zoomInput {
      width: 70px;
      text-align: right;
      padding: 4px 6px;
      font-size: 13px;
    }

    .zoomLbl {
      min-width: 60px;
      text-align: right;
      opacity: 0.7;
      font-size: 13px;
    }

    /* ========== UTILS ========== */
    .grow { flex: 1; }
    .dim { opacity: 0.7; }
    .hidden { display: none !important; }

    /* ========== TOAST/NOTIFICATIONS ========== */
    #toast {
      position: fixed;
      bottom: 20px;
      right: 20px;
      padding: 12px 20px;
      background: var(--bg-tertiary);
      border: 1px solid var(--border-color);
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      z-index: 1000;
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.3s;
      pointer-events: none;
    }

    #toast.show {
      opacity: 1;
      transform: translateY(0);
    }

    #toast.success { border-left: 4px solid var(--success); }
    #toast.error { border-left: 4px solid var(--danger); }
    #toast.warning { border-left: 4px solid var(--warning); }

    /* ========== MODAL ========== */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 999;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s;
    }

    .modal-overlay.show {
      opacity: 1;
      pointer-events: all;
    }

    .modal {
      background: var(--bg-secondary);
      border: 1px solid var(--border-color);
      border-radius: 12px;
      padding: 24px;
      max-width: 500px;
      width: 90%;
      box-shadow: 0 8px 32px rgba(0,0,0,0.3);
    }

    .modal h3 {
      margin-top: 0;
      color: var(--text-primary);
    }

    .modal-buttons {
      display: flex;
      gap: 12px;
      justify-content: flex-end;
      margin-top: 20px;
    }

    /* ========== ATALHOS ========== */
    .shortcuts-help {
      font-size: 12px;
      color: var(--text-secondary);
      padding: 4px 8px;
      background: var(--bg-tertiary);
      border-radius: 4px;
      cursor: help;
    }
  </style>
</head>
<body>
  <!-- ========== TOOLBAR ========== -->
  <header>
    <div class="toolbar-group">
      <button id="btnAdd" class="primary" title="Nova Sess√£o (Ctrl+N)">+ Adicionar</button>
      <button id="btnRemove" class="danger" title="Remover Sess√£o (Del)">Remover</button>
    </div>

    <div class="toolbar-group">
      <button id="btnMax" title="Maximizar (F11)">‚õ∂ Maximizar</button>
      <button id="btnRes" title="Restaurar (Esc)">‚ä° Restaurar</button>
    </div>

    <div class="toolbar-group">
      <button id="btnZoomOut" title="Zoom -10% (Ctrl+-)">‚àí</button>
      <button id="btnZoomIn" title="Zoom +10% (Ctrl++)">+</button>
      <button id="btnZoomReset" title="Zoom 100% (Ctrl+0)">‚ü≤</button>
      <button id="btnReload" title="Recarregar (F5)">‚Üª Reload</button>
    </div>

    <div class="toolbar-group">
      <button id="btnTheme" title="Alternar Tema">üåì Tema</button>
      <button id="btnExport" title="Exportar Config">‚§ì Exportar</button>
      <button id="btnImport" title="Importar Config">‚§í Importar</button>
    </div>

    <span class="grow"></span>

    <span class="shortcuts-help" id="helpBtn" title="Ver atalhos">‚ÑπÔ∏è Atalhos</span>
  </header>

  <!-- ========== GRID DE TILES ========== -->
  <div id="grid" class="grid"></div>

  <!-- ========== TEMPLATE DE TILE ========== -->
  <template id="tpl">
    <div class="tile">
      <div class="loading-overlay">
        <div class="spinner"></div>
      </div>
      <header>
        <strong class="tile-title"></strong>
        <input type="text" class="tile-title-input hidden" maxlength="20">
        <span class="grow"></span>
        <div class="zoomWrap">
          <input class="zoomInput" type="number" min="30" max="300" step="1" title="Digite o zoom">
          <span class="zoomLbl"></span>
        </div>
      </header>
      <webview class="wv" allowpopups disableblinkfeatures="TranslateUI"></webview>
    </div>
  </template>

  <!-- ========== TOAST NOTIFICATION ========== -->
  <div id="toast"></div>

  <!-- ========== MODAL DE CONFIRMA√á√ÉO ========== -->
  <div id="confirmModal" class="modal-overlay">
    <div class="modal">
      <h3>Confirmar A√ß√£o</h3>
      <p id="confirmMessage"></p>
      <div class="modal-buttons">
        <button id="confirmCancel">Cancelar</button>
        <button id="confirmOk" class="danger">Confirmar</button>
      </div>
    </div>
  </div>

  <!-- ========== MODAL DE ATALHOS ========== -->
  <div id="shortcutsModal" class="modal-overlay">
    <div class="modal">
      <h3>‚å®Ô∏è Atalhos de Teclado</h3>
      <table style="width:100%; font-size:14px;">
        <tr><td><b>Ctrl+N</b></td><td>Nova sess√£o</td></tr>
        <tr><td><b>Del</b></td><td>Remover sess√£o</td></tr>
        <tr><td><b>F11</b></td><td>Maximizar sess√£o</td></tr>
        <tr><td><b>Esc</b></td><td>Restaurar grade</td></tr>
        <tr><td><b>Ctrl++</b></td><td>Aumentar zoom</td></tr>
        <tr><td><b>Ctrl+-</b></td><td>Diminuir zoom</td></tr>
        <tr><td><b>Ctrl+0</b></td><td>Resetar zoom (100%)</td></tr>
        <tr><td><b>F5</b></td><td>Recarregar sess√£o</td></tr>
        <tr><td><b>F12</b></td><td>DevTools</td></tr>
      </table>
      <div class="modal-buttons">
        <button id="shortcutsClose" class="primary">Fechar</button>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>


